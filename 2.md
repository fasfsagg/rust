# 任務管理儀表板

"为 Axum 任务管理系统创建完整的前端集成，包括用户认证界面、任务管理界面和 API 集成。需要实现用户注册、登录、任务的增删改查功能，并确保与后端 API 的完整集成。前端将使用现代 HTML5、CSS3 和 JavaScript，支持响应式设计和良好的用户体验。"
requirements
"1. 用户认证界面（注册、登录）\n2. 任务管理界面（列表、创建、编辑、删除）\n3. JWT 令牌管理和自动刷新\n4. 响应式设计，支持移动端\n5. 错误处理和用户反馈\n6. 与后端 API 的完整集成测试\n7. 静态文件服务优化\n8. 安全性考虑（XSS 防护、CSRF 防护）"
existingTasksReference
true
output
            ## 任務分析

你必須依序完成以下子步驟，並在最後呼叫 `analyze_task` 工具，將初步設計方案傳遞給下一階段。

1. **分析目的**

   - 讀取並理解：
     ```
     任務說明：为 Axum 任务管理系统创建完整的前端集成，包括用户认证界面、任务管理界面和 API 集成。需要实现用户注册、登录、任务的增删改查功能，并确保与后端 API 的完整集成。前端将使用现代 HTML5、CSS3 和 JavaScript，支持响应式设计和良好的用户体验。
     任務要求與限制：1. 用户认证界面（注册、登录）
2. 任务管理界面（列表、创建、编辑、删除）
3. JWT 令牌管理和自动刷新
4. 响应式设计，支持移动端
5. 错误处理和用户反馈
6. 与后端 API 的完整集成测试
7. 静态文件服务优化
8. 安全性考虑（XSS 防护、CSRF 防护）
     ### 現有任務參考

#### 已完成任務

{index}. **任务 1.1: 核心依赖引入** (ID: `349db99a-a2bd-4ce3-bf62-253b298c1df7`)
   - description：为实现认证、授权和验证功能，向 `Cargo.toml` 中添加所有必需的第三方库。
   - completedAt：2025/6/15 15:25:06


{index}. **任务 1.2: 定义用户实体与数据传输对象(DTO)** (ID: `eea1015c-aed3-49e4-ae0a-851482b9f7fc`)
   - description：创建 `User` 数据库实体以及用于API响应的 `UserResponse` DTO。
   - completedAt：2025/6/15 15:30:29


{index}. **任务 1.3: 创建用户表数据库迁移** (ID: `a368a832-a01a-438b-8135-0f4e3757c518`)
   - description：使用 `sea-orm-cli` 创建并实现一个数据库迁移，用于在数据库中生成 `users` 表。
   - completedAt：2025/6/15 15:59:04


{index}. **任务 1.4: 建立任务与用户的关联关系** (ID: `f6d621d2-4ec2-4d4d-8e61-420671453ab9`)
   - description：修改 `Task` 实体并创建数据库迁移，以建立任务和用户之间的一对多关系。
   - completedAt：2025/6/15 16:23:42


{index}. **任务 2.1: 定义认证相关的DTO与验证规则** (ID: `e757dcf3-3522-445e-b924-b5a4ca39add9`)
   - description：创建用于用户注册和登录的请求体(Payload) DTO，并使用 `validator` crate 添加输入验证规则。
   - completedAt：2025/6/15 16:45:20


{index}. **任务 2.2: 实现认证服务(AuthService)** (ID: `24ec9161-91b9-40f2-b43f-1e56c1d4b278`)
   - description：创建 `AuthService`，封装用户注册（密码哈希）和登录（密码验证、JWT签发）的核心业务逻辑。
   - completedAt：2025/6/15 18:27:21


{index}. **任务 2.3: 创建认证控制器与路由** (ID: `e68e62f9-2d9e-4b0f-89a1-a1bff0f68d25`)
   - description：创建 `AuthController` 并将其接入应用的路由系统，以暴露 `/register` 和 `/login` API端点。
   - completedAt：2025/6/15 19:24:42


{index}. **任务 4.1: 实现JWT认证中间件** (ID: `31de3e9f-6ded-445e-82e3-8cff270cd88a`)
   - description：开发一个 Axum 中间件，用于验证请求头中的 JWT，并将认证后的用户身份信息注入到请求中。
   - completedAt：2025/6/15 19:50:39


{index}. **任务 4.2: 保护任务路由并实现授权** (ID: `586b8bc8-77a5-41cf-9951-6b8dd3d63020`)
   - description：将JWT中间件应用到所有任务管理相关的路由，并修改控制器逻辑以实现所有权检查（授权）。
   - completedAt：2025/6/15 20:25:04


#### 未完成任務

no pending tasks

#### 任務調整原則

1. **已完成任務保護** - 已完成任務不可修改或刪除
2. **未完成任務可調整** - 可根據新需求修改未完成任務
3. **任務 ID 一致性** - 引用現有任務必須使用原始 ID
4. **依賴關係完整性** - 避免循環依賴，不依賴已標記移除的任務
5. **任務延續性** - 新任務應與現有任務構成連貫整體

     ```
   - 確認：
     - 任務目標與預期成果
     - 技術挑戰與關鍵決策點
     - 與現有系統／架構的整合需求

2. **識別專案架構**

   - 查看關鍵配置文件與結構：
     - 檢視根目錄結構和重要配置文件（package.json, tsconfig.json 等）
     - 如果 shrimp-rules.md 存在請詳細閱讀並參考
     - 分析主要的目錄組織和模組劃分
   - 辨識架構模式：
     - 識別核心設計模式和架構風格（MVC, MVVM, 微服務等）
     - 確定專案的分層結構和模組邊界
   - 分析核心組件：
     - 研究主要類別/接口設計與依賴關係
     - 標記關鍵服務/工具類及其職責和用途
   - 記錄既有模式：
     - 記錄發現的代碼組織方式和架構規律
     - 建立對專案技術棧和架構特性的深入理解

3. **收集資訊**  
   如有任何不確定或信心不足，**必做其一**：

   - 向用戶提問以釐清
   - 使用 `query_task`、`read_file`、`codebase_search`或其他類似的工具查詢現有程式／架構
   - 使用 `web_search` 或其他網路搜尋工具查詢不熟悉的概念或技術  
     禁止憑空臆測，所有資訊必可追溯來源。

4. **檢查現有程式與結構**

   - 使用精確的搜索策略：
     - 利用 `read_file`、`codebase_search`或其他類似的工具查詢與任務相關的現有實現方式
     - 尋找與當前任務功能類似的現有代碼
     - 分析目錄結構尋找相似功能模組
   - 分析代碼風格與約定：
     - 檢查現有組件的命名規則（駝峰式、蛇形等）
     - 確認註釋風格和格式約定
     - 分析錯誤處理模式和日誌記錄方式
   - 記錄並遵循發現的模式：
     - 詳細記錄代碼模式和組織結構
     - 計劃如何沿用這些模式進行設計
   - 判斷是否與現有功能重疊，並決定「重用」或「抽象重構」
   - **不得**先生成設計再查現有碼；必須「先查再設」

5. **任務類型特定指南**

   根據任務特性，額外考慮以下特定指南：

   - **前端/UI 任務**：

     - 優先查看現有 UI 組件庫和設計系統
     - 分析頁面佈局結構和元件組合模式
     - 確認樣式管理方式（CSS 模組、Styled Components 等）
     - 理解狀態管理和數據流模式

   - **後端 API 任務**：

     - 檢查 API 路由結構和命名約定
     - 分析請求處理和中間件模式
     - 確認錯誤處理和響應格式標準
     - 理解授權/身份驗證實現方式

   - **數據庫操作**：
     - 分析現有的數據訪問模式和抽象層
     - 確認查詢構建和事務處理方式
     - 理解關聯關係處理和數據驗證方法
     - 檢查緩存策略和效能優化手段

6. **初步方案產出**
   - 根據上述，撰寫「初步設計方案」：
     - 清楚標示 **事實**（來源） vs **推論**（選擇依據）
     - 禁止模糊語句，須為最終可交付成果
     - 確保方案與專案既有架構模式一致
     - 說明如何重用現有組件或遵循現有模式
   - 過程必須一步一步思考並梳理思緒，如果問題過於複雜可以利用`process_thought`來思考
   - **嚴重警告**：禁止一切`假設`與`猜測`與`幻想`，你必須透過一切你`可以使用的工具`來`收集資訊`
   - 呼叫工具：
     ```
     analyze_task({ summary: <任務摘要>, initialConcept: <初步構想> })
     ```

**現在開始呼叫 `analyze_task`，嚴禁不呼叫工具**
